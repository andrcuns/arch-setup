---

- name: Check if sdkman is installed
  stat:
    path: "{{ sdk_home }}"
  register: sdk

- name: Installing sdk manager
  shell: "curl -s https://get.sdkman.io | bash"
  args:
    creates: "{{ sdk_home }}"
    warn: false
  when: not sdk.stat.exists

- name: Update sdkman
  shell: "{{ init_sdkman }} && sdk selfupdate"

- name: Install sdks
  shell: "{{ init_sdkman }} && sdk install {{ item }}"
  with_items:
    - "{{ sdks }}"

- name: Update sdks
  shell: "{{ init_sdkman }} && sdk upgrade {{ item }}"
  with_items:
    - "{{ sdks }}"
